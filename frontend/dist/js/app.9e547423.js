(function(e){function t(t){for(var n,i,c=t[0],l=t[1],o=t[2],_=0,d=[];_<c.length;_++)i=c[_],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,o||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],n=!0,c=1;c<s.length;c++){var l=s[c];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=s[0]))}return e}var n={},a={app:0},r=[];function i(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=n,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"0918":function(e,t,s){},"11aa":function(e,t,s){"use strict";s("a529")},"14dc":function(e,t,s){var n={"./lego_black.png":"71ae","./lego_blue.png":"e6ff","./lego_brown.png":"ae22","./lego_gray.png":"2e46","./lego_green.png":"fa2a","./lego_orange.png":"ea69","./lego_red.png":"2914","./lego_unknown.png":"9011","./lego_white.png":"eb40","./lego_yellow.png":"f342"};function a(e){var t=r(e);return s(t)}function r(e){if(!s.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}a.keys=function(){return Object.keys(n)},a.resolve=r,e.exports=a,a.id="14dc"},2914:function(e,t,s){e.exports=s.p+"img/lego_red.abcae3bb.png"},"2cf7":function(e,t,s){},"2e46":function(e,t,s){e.exports=s.p+"img/lego_gray.8d3cc1e9.png"},"309d":function(e,t,s){},"30db":function(e,t,s){"use strict";s("9c69")},"3fa7":function(e,t,s){"use strict";s("2cf7")},"4aee":function(e,t,s){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var n=s("2b0e"),a=s("8c4f"),r=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[t("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-light fixed-top"},[t("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[t("img",{staticClass:"d-inline-block align-top",attrs:{src:s("7db1"),alt:"ETH NEXUS",height:"30"}}),e._v("\n      LEGO Sequencer v0.1\n    ")]),e._m(0),t("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarsExampleDefault"}},[t("ul",{staticClass:"navbar-nav mr-auto"},[t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/",tag:"a"}},[e._v(e._s(e.$t("menu.home")))])],1),t("li",{staticClass:"nav-item"},[t("router-link",{staticClass:"nav-link",attrs:{to:"/debug",tag:"a"}},[e._v(e._s(e.$t("menu.debug")))])],1)]),t("div",{staticClass:"form-inline my-2 my-lg-0"},[t("label",{staticClass:"mr-2",attrs:{for:"lang-select"}},[e._v(e._s(e.$t("language"))+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.$i18n.locale,expression:"$i18n.locale"}],staticClass:"form-control",attrs:{id:"lang-select"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.$i18n,"locale",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"en"}},[e._v("English")]),t("option",{attrs:{value:"de-CH"}},[e._v("Schwiizerdütsch")])])])])]),t("main",{staticClass:"container",attrs:{role:"main"}},[t("div",{staticClass:"starter-template"},[t("router-view")],1)])])},i=[function(){var e=this,t=e._self._c;return t("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"}},[t("span",{staticClass:"navbar-toggler-icon"})])}],c={name:"app",components:{}},l=c,o=(s("696e3"),s("0c7c")),u=Object(o["a"])(l,r,i,!1,null,null,null),_=u.exports,d=s("5f5b"),p=(s("ab8b"),s("2dd8"),s("845f"),s("8634"),s("ecee")),b=s("c074"),f=s("ad3d"),g=s("a925"),h=s("e088"),m=s("5d5a"),v=(s("7f7f"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"steps"},[t("transition-group",{attrs:{name:"step",mode:"out-in"}},[0===e.current_step?t("div",{key:0,staticClass:"step",attrs:{id:"step1"}},[t("h1",[e._v(e._s(e.$t("general.welcome"))),t("br"),e._v("LEGO Sequencer!")]),t("label",{attrs:{for:"name"}},[e._v(e._s(e.$t("process.enter_name")))]),t("br"),t("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],attrs:{type:"text",id:"name",placeholder:e.$t("process.name_placeholder")},domProps:{value:e.name},on:{submit:function(t){return e.proceed()},input:function(t){t.target.composing||(e.name=t.target.value)}}}),t("br"),t("button",{staticClass:"btn btn-primary",attrs:{disabled:!e.name},on:{click:function(t){return e.proceed()}}},[e._v(e._s(e.$t("process.continue")))])]):1===e.current_step?t("div",{key:1,staticClass:"step",attrs:{id:"step2"}},[t("h1",[e._v(e._s(e.$t("process.scan_bricks")))]),t("SingleSequencer",{attrs:{username:e.name},on:{"request-blast":e.request_blast}})],1):2===e.current_step?t("div",{key:2,staticClass:"step",attrs:{id:"step3"}},[t("h1",[e._v(e._s(e.$t("process.blast_sequence")))]),t("Blaster",{attrs:{sequence:e.active_sequence,username:e.name},on:{"results-displayed":e.blast_complete}}),e.ready_to_restart?t("div",[t("hr"),t("button",{staticClass:"btn btn-danger",on:{click:function(t){return e.restart()}}},[e._v(e._s(e.$t("process.start_over")))])]):e._e()],1):e._e()])],1)}),y=[],k=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"control_tray"},[t("button",{staticClass:"btn btn-primary",attrs:{disabled:e.active_read&&!e.scan_success},on:{click:e.scan_bricks}},[e._v("\n      "+e._s(e.scan_success?e.$t("sequencer.rescan_bricks"):e.$t("sequencer.scan_bricks"))+"\n    ")]),t("div",{staticClass:"status"},[e.brick_error?t("span",{staticClass:"error"},[t("b",[e._v("Error:")]),e._v(" "+e._s(e.brick_error))]):"PENDING"!==e.brick_status?t("span",["SCANNING"===e.brick_status?t("fa-icon",{attrs:{icon:"circle-notch",spin:""}}):e._e(),e._v("\n          "+e._s(e.$t("sequencer.status."+e.brick_status.toLowerCase()))+"\n        ")],1):e._e()])]),e.active_read?t("div",{staticClass:"brick_tray"},[t("transition-group",{attrs:{name:"bouncy"}},e._l(e.active_read,(function(e,n){return t("img",{key:n,staticClass:"brick_img",attrs:{width:"35",src:s("14dc")("./lego_".concat(e.color,".png")),alt:"".concat(e.color," brick")}})})),0)],1):e._e(),t("transition-group",{attrs:{name:"slideup"}},[e.active_read&&e.scan_success?t("div",{key:"angle-bracket"},[t("fa-icon",{key:"arrow-bit",attrs:{icon:"angle-double-down",size:"2x"}})],1):e._e(),e.active_read&&e.scan_success?t("div",{key:"translation",staticClass:"brick_tray translation"},e._l(e.active_read,(function(s,n){return t("div",{key:n,staticClass:"translated_tile align-middle"},[e._v("\n        "+e._s(e.col_to_base[s.color]||"-")+"\n      ")])})),0):e._e(),e.active_read&&e.scan_success?t("div",{key:"blast_tray",staticClass:"control_tray"},[t("button",{staticClass:"btn btn-outline-secondary",on:{click:function(t){return e.copy_blast(e.active_read)}}},[t("fa-icon",{attrs:{icon:"clipboard"}}),e._v("\n        "+e._s(e.$t("sequencer.copy_sequence"))+"\n      ")],1),t("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.request_blast(e.active_read)}}},[e._v("\n        "+e._s(e.$t("sequencer.blast_sequence"))+"\n      ")])]):e._e()])],1)},q=[],C=s("3667"),S={green:"A",blue:"C",red:"T",yellow:"G"},w=s("8dee"),x={name:"SingleSequencer",props:{username:{type:String,required:!1}},data:function(){return{brick_status:"PENDING",brick_runs:[],active_read:null,brick_error:null,blast_pending:!1,col_to_base:S,query_id:null}},computed:{scan_success:function(){return"COMPLETE"===this.brick_status}},methods:{scan_bricks:function(){var e=this;this.brick_error=null,this.brick_status="SCANNING",C({url:"http://localhost:5000/api/query_ev3?streaming=true&username=".concat(this.username)}).start((function(){e.active_read=[]})).node("!.{color}",(function(t){e.active_read.push(t)})).node("!.{query_id}",(function(t){e.query_id=t.query_id})).done((function(t){e.brick_status="COMPLETE"})).fail((function(t){e.active_read.push({color:"unknown"}),e.brick_status="ERROR",console.warn(t),e.brick_error=t.jsonBody&&t.jsonBody.error?t.jsonBody.error:t.body}))},copy_blast:function(e){var t=e.map((function(e){return S[e.color]})).join(""),s=document.createElement("input"),n=t;document.body.appendChild(s),s.value=n,s.select(),document.execCommand("copy"),document.body.removeChild(s),this.$bvToast.toast("Copied ".concat(t," to clipboard"),{autoHideDelay:2e3,title:"Copied Sequence",variant:"info",toaster:"b-toaster-top-center",noCloseButton:!0})},request_blast:function(e){var t=e.map((function(e){return S[e.color]})).join("");this.$emit("request-blast",t)}}},$=x,j=(s("e6f3"),Object(o["a"])($,k,q,!1,null,"fd0e1266",null)),O=j.exports,N=function(){var e=this,t=e._self._c;return t("div",[e.sequence?t("div",{staticClass:"sequence_tray list-group-item"},[e._l(e.sequence,(function(s,n){return t("div",{key:n,staticClass:"translated_tile align-middle"},[e._v("\n      "+e._s(s)+"\n    ")])})),t("button",{staticClass:"btn btn-primary",staticStyle:{"white-space":"nowrap"},attrs:{disabled:e.blast_pending},on:{click:function(t){return e.blast_sequence(e.sequence,e.$i18n.locale)}}},[e.blast_pending?t("span",[t("fa-icon",{attrs:{icon:"circle-notch",spin:""}}),e._v("\n        "+e._s(e.$t("blaster.running_blast"))+"\n      ")],1):t("span",[e._v("\n        "+e._s(e.blast_result?e.$t("blaster.rerun_blast"):e.$t("blaster.run_blast"))+"\n      ")])])],2):e._e(),e.blast_status||e.blast_hits?t("div",{staticClass:"status_and_results"},[t("transition-group",{attrs:{name:"slideup",mode:"out-in"}},[!e.blast_result||!e.blast_first_five||e.blast_first_five.length<=0?t("div",{key:"status_pane",staticClass:"status_pane"},[t("h4",[e._v("Status:")]),t("div",{ref:"status_scroller",staticClass:"status_scroller"},[t("transition-group",{attrs:{name:"slideright",tag:"ol"}},e._l(e.blast_status,(function(s,n){return t("li",{key:n},[t("span",{domProps:{innerHTML:e._s(s.status)}}),e.blast_pending&&n===e.blast_status.length-1?t("fa-icon",{attrs:{icon:"circle-notch",spin:""}}):e._e()],1)})),0)],1)]):e._e(),e.blast_result?t("div",{key:"results_pane",staticClass:"results_pane"},[t("div",[e.blast_result&&e.blast_result.sequence&&e.blast_unique_hits&&e.blast_unique_hits.length?t("Reflection",{attrs:{sequence:e.blast_result.sequence,"species-list":e.blast_unique_hits.slice(0,6).map((function(e){return e.sciname})),username:e.username}}):e._e(),t("h3",{staticStyle:{"text-align":"left"}},[e._v("\n            "+e._s(e.$t("blaster.hits_header"))+" ("+e._s(e.blast_unique_hits.length)+")\n            "),e.job_url?t("span",[e._v("\n              ("),t("a",{attrs:{href:e.job_url}},[e._v(e._s(e.$t("blaster.view_on_ncbi")))]),e._v(")\n            ")]):e._e()]),t("hr"),e.blast_unique_hits.length>0?t("div",[t("div",{staticClass:"species-tiles"},e._l(e.blast_visible_unique_hits,(function(s){return t("div",{key:s.sciname,staticClass:"species-tile"},[t("SpeciesResult",{attrs:{species:s.sciname,score:s.score,payload:s.payload},on:{"show-details":e.show_details}})],1)})),0),e.blast_visible_hits<e.blast_unique_hits.length?t("div",[t("hr"),t("button",{staticClass:"btn btn-primary",on:{click:function(t){return e.show_more_results()}}},[e._v("\n                "+e._s(e.$t("blaster.show_more_results"))+"\n              ")])]):e._e()]):t("div",{staticClass:"no-results"},[e._v("\n            "+e._s(e.$t("blaster.no_results"))+"\n          ")])],1)]):e._e()])],1):e._e(),t("Sidebar",{ref:"sidedar",scopedSlots:e._u([{key:"default",fn:function(s){return e._l(s.hit.payload.hsps,(function(n,a){return t("div",{staticClass:"hit-data"},[s.hit.payload.hsps.length>1?t("h4",[e._v("Hit #"+e._s(a+1))]):e._e(),t("div",{staticClass:"sec"},[t("h3",[e._v(e._s(e.$t("blaster.score"))+":")]),t("div",{staticClass:"value"},[e._v(e._s(n.score))])]),t("div",{staticClass:"sec"},[t("h3",[e._v(e._s(e.$t("blaster.query_hit_strand"))+":")]),t("div",{staticClass:"value"},[e._v(e._s(n.query_strand)+" / "+e._s(n.hit_strand))])]),t("div",{staticClass:"sec"},[t("h3",[e._v(e._s(e.$t("blaster.alignment"))+":")]),t("div",{staticClass:"value"},[t("div",{staticClass:"mini-sec"},[t("b",[e._v(e._s(e.$t("blaster.length"))+":")]),t("br"),e._v(e._s(n.align_len)+"\n            ")]),t("div",{staticClass:"mini-sec"},[t("b",[e._v(e._s(e.$t("blaster.bases"))+":")]),t("div",{staticClass:"alignment"},[e._v(e._s(n.qseq+"\n"+n.midline+"\n"+n.hseq)+"\n              ")])])])])])}))}}])})],1)},A=[],B=(s("386d"),s("a8fc")),R=s.n(B),T=(s("8fed"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"card species-item",staticStyle:{width:"18rem"}},[e.species_url?t("img",{staticClass:"card-img-top",attrs:{src:e.species_url,alt:e.species}}):t("div",{staticClass:"card-img-top loading-img"},[e.loading?t("fa-icon",{attrs:{icon:"circle-notch",size:"6x",spin:""}}):e.error?t("fa-icon",{attrs:{icon:"question",size:"6x"}}):e._e()],1),t("div",{staticClass:"card-body"},[t("h5",{staticClass:"card-title"},[e._v(e._s(e.species))]),t("p",{staticClass:"card-text"},[e._v(e._s(e.$t("species_result.score"))+": "+e._s(e.score))]),t("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(t){return t.stopPropagation(),e.show_details.apply(null,arguments)}}},[e._v(e._s(e.$t("species_result.details")))]),e._v(" \n    "),t("a",{staticClass:"btn btn-success",attrs:{href:e.gsearch_url,target:"_blank"}},[e._v(e._s(e.$t("species_result.search"))+" "),t("fa-icon",{attrs:{icon:"external-link-alt"}})],1)])])}),E=[],L=(s("c5f6"),{name:"SpeciesResult",props:{species:{type:String,required:!0},score:{type:Number,required:!0},payload:{type:Object,required:!0}},data:function(){return{species_url:null,loading:!1,error:null}},computed:{gsearch_url:function(){return"https://www.google.com/search?safe=active&q=%22".concat(this.species,"%22")}},mounted:function(){var e=this;this.loading=!0,fetch("http://localhost:5000/api/species_img?species=".concat(this.species)).then((function(e){return e.json()})).then((function(t){if(e.loading=!1,!(t.results.length>0))throw{error:"no result found"};e.species_url=t.results[0]})).catch((function(t){e.loading=!1,e.error=t}))},methods:{show_details:function(){this.$emit("show-details",{title:this.species,img_url:this.species_url,score:this.score,payload:this.payload})}}}),D=L,P=(s("bbed"),Object(o["a"])(D,T,E,!1,null,"3c55f4a6",null)),z=P.exports,M=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reflection"},[t("h3",[e._v(e._s(e.$t("reflection.title")))]),e.loading?t("div",[e._v(e._s(e.$t("reflection.generating")))]):e._e(),t("pre",[e._v(e._s(e.reflection))]),e.loading?e._e():t("button",{on:{click:e.generateReflection}},[e._v(e._s(e.$t("reflection.regenerate")))])])},H=[],G=(s("96cf"),s("3b8d")),I={props:{sequence:{type:String,required:!0},speciesList:{type:Array,required:!0},username:{type:String,required:!1}},data:function(){return{reflection:"",loading:!1}},methods:{generateReflection:function(){var e=Object(G["a"])(regeneratorRuntime.mark((function e(){var t,s,n,a,r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("Reflection props:",{sequence:this.sequence,speciesList:this.speciesList,username:this.username,lang:this.$i18n.locale}),this.reflection="",this.loading=!0,e.next=1,fetch("/api/reflection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seq:this.sequence,species:this.speciesList,username:this.username,lang:this.$i18n.locale})});case 1:t=e.sent,s=t.body.getReader(),n=new TextDecoder;case 2:return e.next=3,s.read();case 3:if(a=e.sent,r=a.value,i=a.done,!i){e.next=4;break}return e.abrupt("continue",6);case 4:return this.reflection+=n.decode(r,{stream:!0}),e.next=5,this.$nextTick();case 5:e.next=2;break;case 6:this.loading=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){this.generateReflection()}},J=I,U=(s("f811"),Object(o["a"])(J,M,H,!1,null,"24cc2d9d",null)),F=U.exports,W=function(){var e=this,t=e._self._c;return t("b-modal",{ref:"sidebar",staticClass:"modal right fade",attrs:{id:"sidebar","cancel-disabled":""},scopedSlots:e._u([{key:"modal-footer",fn:function(s){var n=s.ok;s.cancel,s.hide;return[t("b-button",{attrs:{variant:"primary"},on:{click:function(e){return n()}}},[e._v(e._s(e.$t("close")))])]}}])},[t("div",{staticClass:"language-switcher",staticStyle:{"margin-bottom":"1em"}},[t("label",{attrs:{for:"lang-select"}},[e._v(e._s(e.$t("language"))+":")]),t("select",{directives:[{name:"model",rawName:"v-model",value:e.$i18n.locale,expression:"$i18n.locale"}],attrs:{id:"lang-select"},on:{change:function(t){var s=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.$i18n,"locale",t.target.multiple?s:s[0])}}},[t("option",{attrs:{value:"en"}},[e._v("English")]),t("option",{attrs:{value:"de-CH"}},[e._v("Schwiizerdütsch")])])]),t("template",{slot:"modal-title"},[t("h2",[e._v(e._s(e.display_title))])]),e.img_url?t("img",{staticClass:"img-fluid caption-img",attrs:{src:e.img_url,alt:e.display_title}}):e._e(),e.payload?t("div",{staticClass:"d-block"},[e._t("default",null,{hit:e.payload})],2):e._e()],2)},Z=[],Q={name:"Sidebar",props:{title:{type:String,required:!1}},data:function(){return{display_title:this.title,img_url:null,payload:null}},methods:{showModal:function(e){var t=e.title,s=e.img_url;t&&(this.display_title=t),s&&(this.img_url=s),this.payload=e,console.log(e),this.$refs.sidebar.show()}}},K=Q,X=(s("11aa"),Object(o["a"])(K,W,Z,!1,null,"d0183d72",null)),V=X.exports,Y={name:"Blaster",components:{Sidebar:V,SpeciesResult:z,Reflection:F},props:{sequence:{type:String,required:!1},username:{type:String,required:!1}},data:function(){return{blast_pending:!1,blast_status:null,blast_result:null,job_id:null,blast_visible_hits:6}},mounted:function(){this.sequence&&this.blast_sequence(this.sequence,this.$i18n.locale)},computed:{blast_hits:function(){return this.blast_result?(console.log("BLAST hits: ",this.blast_result.data),this.blast_result.data.BlastOutput2[0].report.results.search.hits.map((function(e){return{sciname:e.description[0].sciname,score:e.hsps[0].score,payload:e}}))):null},blast_unique_hits:function(){return this.blast_hits?R()(this.blast_hits,(function(e){return e.sciname})):null},blast_visible_unique_hits:function(){return this.blast_unique_hits?this.blast_unique_hits.slice(0,this.blast_visible_hits):null},job_url:function(){return this.job_id?"https://blast.ncbi.nlm.nih.gov/blast/Blast.cgi?CMD=Get&RID=".concat(this.job_id):null}},methods:{blast_sequence:function(e,t){var s=this;console.log("Analyzing sequence: ",e),C("http://localhost:5000/api/blast?sequence=".concat(e,"&lang=").concat(t)).start((function(){s.blast_pending=!0,s.blast_result=null,s.blast_visible_hits=6,s.blast_status=[{status:s.$t("blaster.analyzing_sequence",{bases:e})}]})).node("!.{status}",(function(e){console.log(e),s.blast_status.push(e),e.job_id&&(s.job_id=e.job_id);var t=s.$refs.status_scroller;t&&setTimeout((function(){t.scrollTop=t.scrollHeight}),10)})).node("!.{results}",(function(t){console.log("Done: ",t),s.blast_result={sequence:e,data:t.results}})).done((function(){s.blast_pending=!1,s.$emit("results-displayed")})).fail((function(e){s.blast_status.push({status:"Error occurred during request, terminated."}),s.blast_pending=!1}))},show_details:function(e){this.$refs.sidedar.showModal(e)},show_more_results:function(){this.blast_visible_hits+=6}}},ee=Y,te=(s("bac1"),Object(o["a"])(ee,N,A,!1,null,"6e49042e",null)),se=te.exports,ne={name:"Process",components:{Blaster:se,SingleSequencer:O},data:function(){return{name:"",current_step:0,active_sequence:null,ready_to_restart:!1}},methods:{restart:function(){var e=this;this.current_step=99,window.scroll({top:0,left:0,behavior:"smooth"}),setTimeout((function(){e.name="",e.current_step=0,e.active_sequence=null,e.ready_to_restart=!1}),300)},proceed:function(){0===this.current_step?this.name&&(this.current_step=1):1===this.current_step&&this.active_sequence&&(this.current_step=2)},request_blast:function(e){this.active_sequence=e,this.proceed()},blast_complete:function(){console.log("BLAST done!"),this.ready_to_restart=!0}}},ae=ne,re=(s("30db"),Object(o["a"])(ae,v,y,!1,null,"7414c567",null)),ie=re.exports,ce=function(){var e=this,t=e._self._c;return t("div",[t("h1",[e._v("LEGO Sequencer (Debug)")]),t("div",{staticClass:"step"},[t("h2",[e._v("1. Nudge Controls")]),t("div",{staticClass:"controls",staticStyle:{"align-items":"baseline"}},[t("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(t){return e.nudge("left",e.nudge_amount)}}},[e._v("« nudge left")]),t("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(t){return e.nudge("right",e.nudge_amount)}}},[e._v("nudge right »")]),t("label",[e._v("Bricks:\n        "),t("input",{directives:[{name:"model",rawName:"v-model",value:e.nudge_amount,expression:"nudge_amount"}],attrs:{type:"number",name:"amount"},domProps:{value:e.nudge_amount},on:{input:function(t){t.target.composing||(e.nudge_amount=t.target.value)}}})])]),t("div",{staticClass:"results"},[e._v("\n      "+e._s(e.response)+"\n    ")])])])},le=[];function oe(e){if(!e.ok&&e.error)throw console.warn("Failed: ",e),e;return e}var ue={name:"Debug",data:function(){return{nudge_amount:1,response:"..."}},methods:{ping:function(){var e=this;fetch("http://localhost:5000/api/ping").then((function(e){return e.json()})).then((function(t){e.response=t.msg}))},nudge:function(e,t){var s=this;fetch("http://localhost:5000/api/nudge/".concat(e,"/").concat(t)).then(oe).then((function(e){return e.json()})).then((function(e){s.response=e.msg})).catch((function(e){s.response=e}))}}},_e=ue,de=Object(o["a"])(_e,ce,le,!1,null,"947947b4",null),pe=de.exports,be=function(){var e=this,t=e._self._c;return t("div",[t("div",[t("h2",[e._v("Scan Sequence")]),t("Sequencer",{on:{"request-blast":e.request_blast}})],1),t("div",[t("h2",[e._v("BLAST Results")]),t("Blaster",{attrs:{sequence:e.active_sequence}})],1)])},fe=[],ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"step"},[t("div",{staticClass:"controls"},[t("button",{staticClass:"btn btn-primary",attrs:{disabled:e.active_read},on:{click:e.scan_bricks}},[e._v("scan bricks")]),t("button",{staticClass:"btn btn-danger",on:{click:e.clear_all}},[e._v("clear runs")]),t("span",{staticClass:"status"},[e.brick_error?t("span",{staticClass:"error"},[t("b",[e._v("Error:")]),e._v(" "+e._s(e.brick_error))]):t("span",["SCANNING"===e.brick_status?t("fa-icon",{attrs:{icon:"spinner",pulse:""}}):e._e(),e._v("\n          "+e._s(e.$t("sequencer.status."+e.brick_status.toLowerCase()))+"\n        ")],1)])]),t("ul",{staticClass:"list-group",staticStyle:{"margin-top":"1em"}},[e._l(e.brick_runs,(function(n,a){return t("li",{key:n.name,class:"list-group-item brick_run ".concat(n.name==e.selected_run?"selected":"")},[t("div",{staticClass:"seq_brick_tray"},[t("button",{staticClass:"blaster-btn btn-sm btn btn-danger",on:{click:function(t){return e.remove_sequence(n.name)}}},[t("fa-icon",{attrs:{icon:"trash"}})],1),t("button",{staticClass:"blaster-btn btn-sm btn btn-primary",on:{click:function(t){return e.request_blast(n.name)}}},[e._v("BLAST")]),e._l(n.data,(function(e,n){return t("img",{key:n,staticClass:"brick_img",attrs:{width:"30",src:s("14dc")("./lego_".concat(e.color,".png"))}})}))],2)])})),e.active_read?t("li",{staticClass:"list-group-item brick_run active_read"},[t("div",{staticClass:"brick_tray"},[t("button",{staticClass:"blaster-btn btn-sm btn btn-secondary",attrs:{disabled:""}},[t("fa-icon",{attrs:{icon:"trash"}})],1),t("button",{staticClass:"blaster-btn btn-sm btn btn-secondary",attrs:{disabled:""}},[e._v("BLAST")]),e._l(e.active_read,(function(e,n){return t("img",{key:n,staticClass:"brick_img",attrs:{width:"30",src:s("14dc")("./lego_".concat(e.color,".png"))}})}))],2)]):e._e()],2)])},he=[],me=(s("7514"),{name:"Sequencer",data:function(){return{brick_status:"PENDING",brick_runs:[],active_read:null,brick_error:null,blast_pending:!1,selected_run:null}},methods:{scan_bricks:function(){var e=this;this.brick_error=null,this.brick_status="SCANNING",C({url:"http://localhost:5000/api/query_ev3?streaming=true"}).start((function(){e.active_read=[]})).node("!.*",(function(t){e.active_read.push(t)})).done((function(t){e.brick_status="COMPLETE",e.brick_runs.push({name:Object(w["generate"])(),data:t}),e.active_read=null})).fail((function(t){e.active_read.push({color:"unknown"}),e.brick_status="ERROR",console.warn(t),e.brick_error=t.jsonBody&&t.jsonBody.error?t.jsonBody.error:t.body}))},remove_sequence:function(e){confirm("Remove this entry?")&&(this.brick_runs=this.brick_runs.filter((function(t){return t.name!==e})),this.selected_run===e&&(this.selected_run=null))},clear_all:function(){confirm("Clear all entries?")&&(this.brick_runs=[],this.selected_run=null)},request_blast:function(e){var t=this.brick_runs.find((function(t){return t.name===e}));if(t){this.selected_run=e;var s=t.data.map((function(e){return S[e.color]})).join("");this.$emit("request-blast",s)}else alert("Unable to find sequence with name ".concat(e,"!"))}}}),ve=me,ye=(s("3fa7"),Object(o["a"])(ve,ge,he,!1,null,"757d7d53",null)),ke=ye.exports,qe={name:"Home",components:{Blaster:se,Sequencer:ke},data:function(){return{active_sequence:null,username:""}},methods:{request_blast:function(e){console.log("BLAST requested: ",e),this.active_sequence=e}}},Ce=qe,Se=Object(o["a"])(Ce,be,fe,!1,null,"2242c280",null),we=Se.exports;n["default"].config.productionTip=!1,n["default"].use(d["a"]),p["c"].add(b["h"],b["f"],b["g"],b["b"],b["a"],b["d"],b["e"],b["c"]),n["default"].component("fa-icon",f["a"]),n["default"].use(g["a"]);var xe={en:h,"de-CH":m},$e=new g["a"]({locale:"en",fallbackLocale:"en",messages:xe});n["default"].use(a["a"]);var je=new a["a"]({mode:"history",routes:[{path:"/",component:ie,name:"home"},{path:"/debug",component:pe,name:"debug"},{path:"/designer",component:we,name:"designer"}]});new n["default"]({i18n:$e,render:function(e){return e(_)},router:je}).$mount("#app")},"5d5a":function(e){e.exports=JSON.parse('{"language":"Sprooch","close":"Zuemache","sidebar":{"title":"Syteleischte","close":"Zuemache"},"modal":{"header":"Modal-Titel","content":"Das isch dr Inhalt vom Modal."},"general":{"welcome":"Willkomme i dr Applikation!","loading":"Am Lade...","error":"Es isch öppis schief gloffe. Bitte versuech\'s nomol."},"process":{"enter_name":"Bitte gib dis Name ii:","name_placeholder":"Name da iigäh","continue":"Wyter","scan_bricks":"Bricks scanne","blast_sequence":"Sequenzanalyse","start_over":"No mal aafange"},"menu":{"home":"Start","debug":"Debug","designer":"Designer"},"sequencer":{"scan_bricks":"Bricks scanne","rescan_bricks":"No mal scanne","clear_runs":"Läufe lösche","blast":"BLAST","copy_sequence":"In Zwüschablage kopiere","blast_sequence":"Sequenz analysiere","status":{"pending":"Wartend","scanning":"Am scanne...","error":"Fehler","complete":"Fertig!"}},"blaster":{"run_blast":"Analysiere","rerun_blast":"d\'Analys nomol starte","running_blast":"d\'Analys lauft...","show_more_results":"Mehr Resultat azeige","no_results":"Kei passende Spezies gfunde.\\nProbier\'s nomol mit ere andere Sequenz!","analyzing_sequence":"Analysiere {bases}","score":"Alignment-Score","query_hit_strand":"Referenz-Strang / Read-Strang","alignment":"Alignment","length":"Länge","bases":"Basä","hits_header":"Treffer","view_on_ncbi":"Uf NCBI aaluege"},"species_result":{"details":"Details","search":"Sueche","score":"Alignment-Score","query_strand":"Referenz-Strang","hit_strand":"Read-Strang","align_len":"Alignmentslänge"},"reflection":{"title":"Sequenz-Reflexion","generating":"Reflexion wird generiert...","regenerate":"No mal generiere"}}')},"696e3":function(e,t,s){"use strict";s("a1d9")},"71ae":function(e,t,s){e.exports=s.p+"img/lego_black.e0a5cc99.png"},7239:function(e,t,s){},"7db1":function(e,t,s){e.exports=s.p+"img/nexus_icon.ebd95bd1.png"},"845f":function(e,t,s){},8634:function(e,t,s){},9011:function(e,t,s){e.exports=s.p+"img/lego_unknown.dd4533c5.png"},"9c69":function(e,t,s){},a1d9:function(e,t,s){},a529:function(e,t,s){},ae22:function(e,t,s){e.exports=s.p+"img/lego_brown.e0a9636d.png"},bac1:function(e,t,s){"use strict";s("309d")},bbed:function(e,t,s){"use strict";s("0918")},e088:function(e){e.exports=JSON.parse('{"language":"Language","close":"Close","sidebar":{"title":"Sidebar","close":"Close"},"modal":{"header":"Modal Header","content":"This is the content of the modal."},"general":{"welcome":"Welcome to the application!","loading":"Loading...","error":"An error occurred. Please try again."},"process":{"enter_name":"Please enter your name:","name_placeholder":"enter your name here","continue":"Continue","scan_bricks":"Scan Bricks","blast_sequence":"Sequence Analysis","start_over":"Start Over"},"menu":{"home":"Home","debug":"Debug","designer":"Designer"},"sequencer":{"scan_bricks":"Scan Bricks","rescan_bricks":"Re-scan Bricks","status":{"pending":"Pending","scanning":"Scanning...","error":"Error","complete":"Done!"},"copy_sequence":"Copy to Clipboard","blast_sequence":"Analyze Sequence"},"blaster":{"run_blast":"Analyze","rerun_blast":"Reanalyze","running_blast":"analyzing...","show_more_results":"Show More Results","no_results":"No matching species found.\\nTry again with another sequence!","analyzing_sequence":"Analyzing {bases}","hits_header":"Hits","view_on_ncbi":"view on NCBI","score":"Score","query_hit_strand":"Query/Hit Strand","alignment":"Alignment","length":"Length","bases":"Bases"},"reflection":{"title":"Sequence Reflection","generating":"Generating reflection...","regenerate":"Regenerate"},"species_result":{"details":"Details","search":"Search","score":"Score","query_strand":"Query Strand","hit_strand":"Hit Strand","align_len":"Alignment Length"}}')},e6f3:function(e,t,s){"use strict";s("7239")},e6ff:function(e,t,s){e.exports=s.p+"img/lego_blue.55fcb86d.png"},ea69:function(e,t,s){e.exports=s.p+"img/lego_orange.e7ba1561.png"},eb40:function(e,t,s){e.exports=s.p+"img/lego_white.3d50df46.png"},f342:function(e,t,s){e.exports=s.p+"img/lego_yellow.31595d79.png"},f811:function(e,t,s){"use strict";s("4aee")},fa2a:function(e,t,s){e.exports=s.p+"img/lego_green.4179fe81.png"}});
//# sourceMappingURL=app.9e547423.js.map