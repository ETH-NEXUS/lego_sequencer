(function(t){function e(e){for(var s,i,c=e[0],o=e[1],l=e[2],d=0,_=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&_.push(a[i][0]),a[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(_.length)_.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],s=!0,c=1;c<n.length;c++){var o=n[c];0!==a[o]&&(s=!1)}s&&(r.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},a={app:0},r=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"05ef":function(t,e,n){"use strict";n("ff27")},"14dc":function(t,e,n){var s={"./lego_black.png":"71ae","./lego_blue.png":"e6ff","./lego_brown.png":"ae22","./lego_gray.png":"2e46","./lego_green.png":"fa2a","./lego_orange.png":"ea69","./lego_red.png":"2914","./lego_unknown.png":"9011","./lego_white.png":"eb40","./lego_yellow.png":"f342"};function a(t){var e=r(t);return n(e)}function r(t){if(!n.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}a.keys=function(){return Object.keys(s)},a.resolve=r,t.exports=a,a.id="14dc"},2914:function(t,e,n){t.exports=n.p+"img/lego_red.abcae3bb.png"},2967:function(t,e,n){},"2e46":function(t,e,n){t.exports=n.p+"img/lego_gray.8d3cc1e9.png"},"463e":function(t,e,n){},"4d4a":function(t,e,n){},5490:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var s=n("2b0e"),a=n("8c4f"),r=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav",{staticClass:"navbar navbar-expand-md navbar-light bg-light fixed-top"},[e("a",{staticClass:"navbar-brand",attrs:{href:"/"}},[e("img",{staticClass:"d-inline-block align-top",attrs:{src:n("7db1"),alt:"ETH NEXUS",height:"30"}}),t._v("\n      LEGO Sequencer v0.1\n    ")]),t._m(0),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarsExampleDefault"}},[e("ul",{staticClass:"navbar-nav mr-auto"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/",tag:"a"}},[t._v("Home")])],1),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/debug",tag:"a"}},[t._v("Debug")])],1)])])]),e("main",{staticClass:"container",attrs:{role:"main"}},[e("div",{staticClass:"starter-template"},[e("router-view")],1)])])},i=[function(){var t=this,e=t._self._c;return e("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarsExampleDefault","aria-controls":"navbarsExampleDefault","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}],c={name:"app",components:{}},o=c,l=(n("fbf1"),n("0c7c")),u=Object(l["a"])(o,r,i,!1,null,null,null),d=u.exports,_=n("5f5b"),p=(n("ab8b"),n("2dd8"),n("845f"),n("8634"),n("ecee")),b=n("c074"),f=n("ad3d"),h=(n("7f7f"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"steps"},[e("transition-group",{attrs:{name:"step",mode:"out-in"}},[0===t.current_step?e("div",{key:0,staticClass:"step",attrs:{id:"step1"}},[e("h1",[t._v("Welcome to the"),e("br"),t._v("LEGO Sequencer!")]),e("label",{attrs:{for:"name"}},[t._v("Please enter your name:")]),e("br"),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",id:"name",placeholder:"enter your name here"},domProps:{value:t.name},on:{submit:function(e){return t.proceed()},input:function(e){e.target.composing||(t.name=e.target.value)}}}),e("br"),e("button",{staticClass:"btn btn-primary",attrs:{disabled:!t.name},on:{click:function(e){return t.proceed()}}},[t._v("Continue")])]):1===t.current_step?e("div",{key:1,staticClass:"step",attrs:{id:"step2"}},[e("h1",[t._v("Scan Bricks")]),e("SingleSequencer",{attrs:{username:t.name},on:{"request-blast":t.request_blast}})],1):2===t.current_step?e("div",{key:2,staticClass:"step",attrs:{id:"step3"}},[e("h1",[t._v("BLAST Sequence")]),e("Blaster",{attrs:{sequence:t.active_sequence,username:t.name},on:{"results-displayed":t.blast_complete}}),t.ready_to_restart?e("div",[e("hr"),e("button",{staticClass:"btn btn-danger",on:{click:function(e){return t.restart()}}},[t._v("Start Over")])]):t._e()],1):t._e()])],1)}),v=[],g=function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"control_tray"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.active_read&&!t.scan_success},on:{click:t.scan_bricks}},[t._v("\n      "+t._s(t.scan_success?"Re-scan":"Scan")+" Bricks\n    ")]),e("div",{staticClass:"status"},[t.brick_error?e("span",{staticClass:"error"},[e("b",[t._v("Error:")]),t._v(" "+t._s(t.brick_error))]):"PENDING"!==t.brick_status?e("span",["SCANNING"===t.brick_status?e("fa-icon",{attrs:{icon:"circle-notch",spin:""}}):t._e(),t._v("\n          "+t._s(t.scan_status[t.brick_status])+"\n        ")],1):t._e()])]),t.active_read?e("div",{staticClass:"brick_tray"},[e("transition-group",{attrs:{name:"bouncy"}},t._l(t.active_read,(function(t,s){return e("img",{key:s,staticClass:"brick_img",attrs:{width:"35",src:n("14dc")("./lego_".concat(t.color,".png")),alt:"".concat(t.color," brick")}})})),0)],1):t._e(),e("transition-group",{attrs:{name:"slideup"}},[t.active_read&&t.scan_success?e("div",{key:"angle-bracket"},[e("fa-icon",{key:"arrow-bit",attrs:{icon:"angle-double-down",size:"2x"}})],1):t._e(),t.active_read&&t.scan_success?e("div",{key:"translation",staticClass:"brick_tray translation"},t._l(t.active_read,(function(n,s){return e("div",{key:s,staticClass:"translated_tile align-middle"},[t._v("\n        "+t._s(t.col_to_base[n.color]||"-")+"\n      ")])})),0):t._e(),t.active_read&&t.scan_success?e("div",{key:"blast_tray",staticClass:"control_tray"},[e("button",{staticClass:"btn btn-outline-secondary",on:{click:function(e){return t.copy_blast(t.active_read)}}},[t._v("Copy Sequence")]),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.request_blast(t.active_read)}}},[t._v("BLAST Sequence")])]):t._e()])],1)},m=[],y=n("3667"),C={green:"A",blue:"C",red:"T",yellow:"G"},k=n("8dee"),q={PENDING:"pending",SCANNING:"scanning...",ERROR:"error",COMPLETE:"done!"},S={name:"SingleSequencer",props:{username:{type:String,required:!1}},data:function(){return{brick_status:"PENDING",brick_runs:[],active_read:null,brick_error:null,blast_pending:!1,scan_status:q,col_to_base:C,query_id:null}},computed:{scan_success:function(){return"COMPLETE"===this.brick_status}},methods:{scan_bricks:function(){var t=this;this.brick_error=null,this.brick_status="SCANNING",y({url:"http://localhost:5000/api/query_ev3?streaming=true&username=".concat(this.username)}).start((function(){t.active_read=[]})).node("!.{color}",(function(e){t.active_read.push(e)})).node("!.{query_id}",(function(e){t.query_id=e.query_id})).done((function(e){t.brick_status="COMPLETE"})).fail((function(e){t.active_read.push({color:"unknown"}),t.brick_status="ERROR",console.warn(e),t.brick_error=e.jsonBody&&e.jsonBody.error?e.jsonBody.error:e.body}))},copy_blast:function(t){var e=t.map((function(t){return C[t.color]})).join(""),n=document.createElement("input"),s=e;document.body.appendChild(n),n.value=s,n.select(),document.execCommand("copy"),document.body.removeChild(n),this.$bvToast.toast("Copied ".concat(e," to clipboard"),{autoHideDelay:2e3,title:"Copied Sequence",variant:"info",toaster:"b-toaster-top-center",noCloseButton:!0})},request_blast:function(t){var e=t.map((function(t){return C[t.color]})).join("");this.$emit("request-blast",e)}}},w=S,x=(n("f833"),Object(l["a"])(w,g,m,!1,null,"4e028182",null)),j=x.exports,O=function(){var t=this,e=t._self._c;return e("div",[t.sequence?e("div",{staticClass:"sequence_tray list-group-item"},[t._l(t.sequence,(function(n,s){return e("div",{key:s,staticClass:"translated_tile align-middle"},[t._v("\n      "+t._s(n)+"\n    ")])})),e("button",{staticClass:"btn btn-primary",staticStyle:{"white-space":"nowrap"},attrs:{disabled:t.blast_pending},on:{click:function(e){return t.blast_sequence(t.sequence)}}},[t.blast_pending?e("span",[e("fa-icon",{attrs:{icon:"circle-notch",spin:""}}),t._v("\n        Running BLAST...\n      ")],1):e("span",[t._v(t._s(t.blast_result?"Re-run":"Run")+" BLAST")])])],2):t._e(),t.blast_status||t.blast_hits?e("div",{staticClass:"status_and_results"},[e("transition-group",{attrs:{name:"slideup",mode:"out-in"}},[!t.blast_result||!t.blast_first_five||t.blast_first_five.length<=0?e("div",{key:"status_pane",staticClass:"status_pane"},[e("h4",[t._v("Status:")]),e("div",{ref:"status_scroller",staticClass:"status_scroller"},[e("transition-group",{attrs:{name:"slideright",tag:"ol"}},t._l(t.blast_status,(function(n,s){return e("li",{key:s},[e("span",{domProps:{innerHTML:t._s(n.status)}}),t.blast_pending&&s===t.blast_status.length-1?e("fa-icon",{attrs:{icon:"circle-notch",spin:""}}):t._e()],1)})),0)],1)]):t._e(),t.blast_result?e("div",{key:"results_pane",staticClass:"results_pane"},[e("div",[e("h3",{staticStyle:{"text-align":"left"}},[t._v("Hits ("+t._s(t.blast_unique_hits.length)+") ("),e("a",{attrs:{href:t.job_url}},[t._v("view on NCBI")]),t._v("):")]),e("hr"),t.blast_result&&t.blast_result.sequence&&t.blast_unique_hits&&t.blast_unique_hits.length?e("Reflection",{attrs:{sequence:t.blast_result.sequence,"species-list":t.blast_unique_hits.slice(0,6).map((function(t){return t.sciname})),username:t.username}}):t._e(),t.blast_unique_hits.length>0?e("div",[e("div",{staticClass:"species-tiles"},t._l(t.blast_visible_unique_hits,(function(n){return e("div",{key:n.sciname,staticClass:"species-tile"},[e("SpeciesResult",{attrs:{species:n.sciname,score:n.score,payload:n.payload},on:{"show-details":t.show_details}})],1)})),0),t.blast_visible_hits<t.blast_unique_hits.length?e("div",[e("hr"),e("button",{staticClass:"btn btn-primary",on:{click:function(e){return t.show_more_results()}}},[t._v("Show More Results")])]):t._e()]):e("div",{staticClass:"no-results"},[t._v("\n            No matching species found.\n            "),e("br"),t._v("\n            Try again with another sequence!\n          ")])],1)]):t._e()])],1):t._e(),e("Sidebar",{ref:"sidedar",scopedSlots:t._u([{key:"default",fn:function(n){return t._l(n.hit.payload.hsps,(function(s,a){return e("div",{staticClass:"hit-data"},[n.hit.payload.hsps.length>1?e("h4",[t._v("Hit #"+t._s(a+1))]):t._e(),e("div",{staticClass:"sec"},[e("h3",[t._v("Score:")]),e("div",{staticClass:"value"},[t._v(t._s(s.score))])]),e("div",{staticClass:"sec"},[e("h3",[t._v("Query/Hit Strand:")]),e("div",{staticClass:"value"},[t._v(t._s(s.query_strand)+" / "+t._s(s.hit_strand))])]),e("div",{staticClass:"sec"},[e("h3",[t._v("Alignment:")]),e("div",{staticClass:"value"},[e("div",{staticClass:"mini-sec"},[e("b",[t._v("Length:")]),e("br"),t._v(t._s(s.align_len)+"\n            ")]),e("div",{staticClass:"mini-sec"},[e("b",[t._v("Bases:")]),e("div",{staticClass:"alignment"},[t._v(t._s(s.qseq+"\n"+s.midline+"\n"+s.hseq)+"\n              ")])])])])])}))}}])})],1)},N=[],E=(n("386d"),n("a8fc")),R=n.n(E),T=(n("8fed"),function(){var t=this,e=t._self._c;return e("div",{staticClass:"card species-item",staticStyle:{width:"18rem"}},[t.species_url?e("img",{staticClass:"card-img-top",attrs:{src:t.species_url,alt:t.species}}):e("div",{staticClass:"card-img-top loading-img"},[t.loading?e("fa-icon",{attrs:{icon:"circle-notch",size:"6x",spin:""}}):t.error?e("fa-icon",{attrs:{icon:"question",size:"6x"}}):t._e()],1),e("div",{staticClass:"card-body"},[e("h5",{staticClass:"card-title"},[t._v(t._s(t.species))]),e("p",{staticClass:"card-text"},[t._v("Score: "+t._s(t.score))]),e("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(e){return e.stopPropagation(),t.show_details.apply(null,arguments)}}},[t._v("Details")]),t._v(" \n    "),e("a",{staticClass:"btn btn-success",attrs:{href:t.gsearch_url,target:"_blank"}},[t._v("Search "),e("fa-icon",{attrs:{icon:"external-link-alt"}})],1)])])}),B=[],L=(n("c5f6"),{name:"SpeciesResult",props:{species:{type:String,required:!0},score:{type:Number,required:!0},payload:{type:Object,required:!0}},data:function(){return{species_url:null,loading:!1,error:null}},computed:{gsearch_url:function(){return"https://www.google.com/search?safe=active&q=%22".concat(this.species,"%22")}},mounted:function(){var t=this;this.loading=!0,fetch("http://localhost:5000/api/species_img?species=".concat(this.species)).then((function(t){return t.json()})).then((function(e){if(t.loading=!1,!(e.results.length>0))throw{error:"no result found"};t.species_url=e.results[0]})).catch((function(e){t.loading=!1,t.error=e}))},methods:{show_details:function(){this.$emit("show-details",{title:this.species,img_url:this.species_url,score:this.score,payload:this.payload})}}}),P=L,A=(n("ae00"),Object(l["a"])(P,T,B,!1,null,"0ce49b28",null)),D=A.exports,G=function(){var t=this,e=t._self._c;return e("div",{staticClass:"reflection"},[e("h3",[t._v("Sequence Reflection")]),t.loading?e("div",[t._v("Generating reflection...")]):e("pre",[t._v(t._s(t.reflection))]),t.loading?t._e():e("button",{on:{click:t.generateReflection}},[t._v("Regenerate")])])},M=[],I=(n("96cf"),n("3b8d")),H={props:{sequence:{type:String,required:!0},speciesList:{type:Array,required:!0}},data:function(){return{reflection:"",loading:!1}},methods:{generateReflection:function(){var t=Object(I["a"])(regeneratorRuntime.mark((function t(){var e,n,s,a,r,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.reflection="",this.loading=!0,t.next=1,fetch("/api/reflection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({seq:this.sequence,species:this.speciesList,username:this.username})});case 1:e=t.sent,n=e.body.getReader(),s=new TextDecoder;case 2:return t.next=3,n.read();case 3:if(a=t.sent,r=a.value,i=a.done,!i){t.next=4;break}return t.abrupt("continue",5);case 4:this.reflection+=s.decode(r,{stream:!0}),t.next=2;break;case 5:this.loading=!1;case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},mounted:function(){this.generateReflection()}},$=H,U=(n("7e43"),Object(l["a"])($,G,M,!1,null,"66d94452",null)),z=U.exports,J=function(){var t=this,e=t._self._c;return e("b-modal",{ref:"sidebar",staticClass:"modal right fade",attrs:{id:"sidebar","cancel-disabled":""},scopedSlots:t._u([{key:"modal-footer",fn:function(n){var s=n.ok;n.cancel,n.hide;return[e("b-button",{attrs:{variant:"primary"},on:{click:function(t){return s()}}},[t._v("Close")])]}}])},[e("template",{slot:"modal-title"},[e("h2",[t._v(t._s(t.display_title))])]),t.img_url?e("img",{staticClass:"img-fluid caption-img",attrs:{src:t.img_url,alt:t.display_title}}):t._e(),t.payload?e("div",{staticClass:"d-block"},[t._t("default",null,{hit:t.payload})],2):t._e()],2)},F=[],Q={name:"Sidebar",props:{title:{type:String,required:!1}},data:function(){return{display_title:this.title,img_url:null,payload:null}},methods:{showModal:function(t){var e=t.title,n=t.img_url;e&&(this.display_title=e),n&&(this.img_url=n),this.payload=t,console.log(t),this.$refs.sidebar.show()}}},W=Q,X=(n("e8d8"),Object(l["a"])(W,J,F,!1,null,"6b939d07",null)),K=X.exports,V={name:"Blaster",components:{Sidebar:K,SpeciesResult:D,Reflection:z},props:{sequence:{type:String,required:!1},username:{type:String,required:!1}},data:function(){return{blast_pending:!1,blast_status:null,blast_result:null,job_id:null,blast_visible_hits:6}},mounted:function(){this.sequence&&this.blast_sequence(this.sequence)},computed:{blast_hits:function(){return this.blast_result?this.blast_result.data.BlastOutput2[0].report.results.search.hits.map((function(t){return{sciname:t.description[0].sciname,score:t.hsps[0].score,payload:t}})):null},blast_unique_hits:function(){return this.blast_hits?R()(this.blast_hits,(function(t){return t.sciname})):null},blast_visible_unique_hits:function(){return this.blast_unique_hits?this.blast_unique_hits.slice(0,this.blast_visible_hits):null},job_url:function(){return this.job_id?"https://blast.ncbi.nlm.nih.gov/blast/Blast.cgi?CMD=Get&RID=".concat(this.job_id):null}},methods:{blast_sequence:function(t){var e=this;console.log("BLASTing ",t),y("http://localhost:5000/api/blast?sequence=".concat(t)).start((function(){e.blast_pending=!0,e.blast_result=null,e.blast_visible_hits=6,e.blast_status=[{status:"BLASTing ".concat(t,"...")}]})).node("!.{status}",(function(t){console.log(t),e.blast_status.push(t),t.job_id&&(e.job_id=t.job_id);var n=e.$refs.status_scroller;n&&setTimeout((function(){n.scrollTop=n.scrollHeight}),10)})).node("!.{results}",(function(n){console.log("Done: ",n),e.blast_result={sequence:t,data:n.results}})).done((function(){e.blast_pending=!1,e.$emit("results-displayed")})).fail((function(t){e.blast_status.push({status:"Error occurred during request, terminated."}),e.blast_pending=!1}))},show_details:function(t){this.$refs.sidedar.showModal(t)},show_more_results:function(){this.blast_visible_hits+=6}}},Y=V,Z=(n("9537"),Object(l["a"])(Y,O,N,!1,null,"9e97aa18",null)),tt=Z.exports,et={name:"Process",components:{Blaster:tt,SingleSequencer:j},data:function(){return{name:"",current_step:0,active_sequence:null,ready_to_restart:!1}},methods:{restart:function(){var t=this;this.current_step=99,window.scroll({top:0,left:0,behavior:"smooth"}),setTimeout((function(){t.name="",t.current_step=0,t.active_sequence=null,t.ready_to_restart=!1}),300)},proceed:function(){0===this.current_step?this.name&&(this.current_step=1):1===this.current_step&&this.active_sequence&&(this.current_step=2)},request_blast:function(t){this.active_sequence=t,this.proceed()},blast_complete:function(){console.log("BLAST done!"),this.ready_to_restart=!0}}},nt=et,st=(n("a474"),Object(l["a"])(nt,h,v,!1,null,"0451d208",null)),at=st.exports,rt=function(){var t=this,e=t._self._c;return e("div",[e("h1",[t._v("LEGO Sequencer (Debug)")]),e("div",{staticClass:"step"},[e("h2",[t._v("1. Nudge Controls")]),e("div",{staticClass:"controls",staticStyle:{"align-items":"baseline"}},[e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.nudge("left",t.nudge_amount)}}},[t._v("« nudge left")]),e("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.nudge("right",t.nudge_amount)}}},[t._v("nudge right »")]),e("label",[t._v("Bricks:\n        "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.nudge_amount,expression:"nudge_amount"}],attrs:{type:"number",name:"amount"},domProps:{value:t.nudge_amount},on:{input:function(e){e.target.composing||(t.nudge_amount=e.target.value)}}})])]),e("div",{staticClass:"results"},[t._v("\n      "+t._s(t.response)+"\n    ")])])])},it=[];function ct(t){if(!t.ok&&t.error)throw console.warn("Failed: ",t),t;return t}var ot={name:"Debug",data:function(){return{nudge_amount:1,response:"..."}},methods:{ping:function(){var t=this;fetch("http://localhost:5000/api/ping").then((function(t){return t.json()})).then((function(e){t.response=e.msg}))},nudge:function(t,e){var n=this;fetch("http://localhost:5000/api/nudge/".concat(t,"/").concat(e)).then(ct).then((function(t){return t.json()})).then((function(t){n.response=t.msg})).catch((function(t){n.response=t}))}}},lt=ot,ut=Object(l["a"])(lt,rt,it,!1,null,"947947b4",null),dt=ut.exports,_t=function(){var t=this,e=t._self._c;return e("div",[e("div",[e("h2",[t._v("Scan Sequence")]),e("Sequencer",{on:{"request-blast":t.request_blast}})],1),e("div",[e("h2",[t._v("BLAST Results")]),e("Blaster",{attrs:{sequence:t.active_sequence}})],1)])},pt=[],bt=function(){var t=this,e=t._self._c;return e("div",{staticClass:"step"},[e("div",{staticClass:"controls"},[e("button",{staticClass:"btn btn-primary",attrs:{disabled:t.active_read},on:{click:t.scan_bricks}},[t._v("scan bricks")]),e("button",{staticClass:"btn btn-danger",on:{click:t.clear_all}},[t._v("clear runs")]),e("span",{staticClass:"status"},[t.brick_error?e("span",{staticClass:"error"},[e("b",[t._v("Error:")]),t._v(" "+t._s(t.brick_error))]):e("span",["SCANNING"===t.brick_status?e("fa-icon",{attrs:{icon:"spinner",pulse:""}}):t._e(),t._v("\n          "+t._s(t.scan_status[t.brick_status])+"\n        ")],1)])]),e("ul",{staticClass:"list-group",staticStyle:{"margin-top":"1em"}},[t._l(t.brick_runs,(function(s,a){return e("li",{key:s.name,class:"list-group-item brick_run ".concat(s.name==t.selected_run?"selected":"")},[e("div",{staticClass:"seq_brick_tray"},[e("button",{staticClass:"blaster-btn btn-sm btn btn-danger",on:{click:function(e){return t.remove_sequence(s.name)}}},[e("fa-icon",{attrs:{icon:"trash"}})],1),e("button",{staticClass:"blaster-btn btn-sm btn btn-primary",on:{click:function(e){return t.request_blast(s.name)}}},[t._v("BLAST")]),t._l(s.data,(function(t,s){return e("img",{key:s,staticClass:"brick_img",attrs:{width:"30",src:n("14dc")("./lego_".concat(t.color,".png"))}})}))],2)])})),t.active_read?e("li",{staticClass:"list-group-item brick_run active_read"},[e("div",{staticClass:"brick_tray"},[e("button",{staticClass:"blaster-btn btn-sm btn btn-secondary",attrs:{disabled:""}},[e("fa-icon",{attrs:{icon:"trash"}})],1),e("button",{staticClass:"blaster-btn btn-sm btn btn-secondary",attrs:{disabled:""}},[t._v("BLAST")]),t._l(t.active_read,(function(t,s){return e("img",{key:s,staticClass:"brick_img",attrs:{width:"30",src:n("14dc")("./lego_".concat(t.color,".png"))}})}))],2)]):t._e()],2)])},ft=[],ht=(n("7514"),{PENDING:"pending",SCANNING:"scanning...",ERROR:"error",COMPLETE:"done!"}),vt={name:"Sequencer",data:function(){return{brick_status:"PENDING",brick_runs:[],active_read:null,brick_error:null,blast_pending:!1,scan_status:ht,selected_run:null}},methods:{scan_bricks:function(){var t=this;this.brick_error=null,this.brick_status="SCANNING",y({url:"http://localhost:5000/api/query_ev3?streaming=true"}).start((function(){t.active_read=[]})).node("!.*",(function(e){t.active_read.push(e)})).done((function(e){t.brick_status="COMPLETE",t.brick_runs.push({name:Object(k["generate"])(),data:e}),t.active_read=null})).fail((function(e){t.active_read.push({color:"unknown"}),t.brick_status="ERROR",console.warn(e),t.brick_error=e.jsonBody&&e.jsonBody.error?e.jsonBody.error:e.body}))},remove_sequence:function(t){confirm("Remove this entry?")&&(this.brick_runs=this.brick_runs.filter((function(e){return e.name!==t})),this.selected_run===t&&(this.selected_run=null))},clear_all:function(){confirm("Clear all entries?")&&(this.brick_runs=[],this.selected_run=null)},request_blast:function(t){var e=this.brick_runs.find((function(e){return e.name===t}));if(e){this.selected_run=t;var n=e.data.map((function(t){return C[t.color]})).join("");this.$emit("request-blast",n)}else alert("Unable to find sequence with name ".concat(t,"!"))}}},gt=vt,mt=(n("05ef"),Object(l["a"])(gt,bt,ft,!1,null,"7a56728c",null)),yt=mt.exports,Ct={name:"Home",components:{Blaster:tt,Sequencer:yt},data:function(){return{active_sequence:null}},methods:{request_blast:function(t){console.log("BLAST requested: ",t),this.active_sequence=t}}},kt=Ct,qt=Object(l["a"])(kt,_t,pt,!1,null,"0240b25a",null),St=qt.exports;s["default"].config.productionTip=!1,s["default"].use(_["a"]),p["c"].add(b["h"],b["f"],b["g"],b["b"],b["a"],b["d"],b["e"],b["c"]),s["default"].component("fa-icon",f["a"]),s["default"].use(a["a"]);var wt=new a["a"]({mode:"history",routes:[{path:"/",component:at,name:"home"},{path:"/debug",component:dt,name:"debug"},{path:"/designer",component:St,name:"designer"}]});new s["default"]({render:function(t){return t(d)},router:wt}).$mount("#app")},"71ae":function(t,e,n){t.exports=n.p+"img/lego_black.e0a5cc99.png"},"7db1":function(t,e,n){t.exports=n.p+"img/nexus_icon.ebd95bd1.png"},"7e43":function(t,e,n){"use strict";n("4d4a")},"845f":function(t,e,n){},8634:function(t,e,n){},9011:function(t,e,n){t.exports=n.p+"img/lego_unknown.dd4533c5.png"},9537:function(t,e,n){"use strict";n("b5ad")},a474:function(t,e,n){"use strict";n("2967")},ae00:function(t,e,n){"use strict";n("edaf")},ae22:function(t,e,n){t.exports=n.p+"img/lego_brown.e0a9636d.png"},b5ad:function(t,e,n){},ccb4:function(t,e,n){},e6ff:function(t,e,n){t.exports=n.p+"img/lego_blue.55fcb86d.png"},e8d8:function(t,e,n){"use strict";n("ccb4")},ea69:function(t,e,n){t.exports=n.p+"img/lego_orange.e7ba1561.png"},eb40:function(t,e,n){t.exports=n.p+"img/lego_white.3d50df46.png"},edaf:function(t,e,n){},f342:function(t,e,n){t.exports=n.p+"img/lego_yellow.31595d79.png"},f833:function(t,e,n){"use strict";n("5490")},fa2a:function(t,e,n){t.exports=n.p+"img/lego_green.4179fe81.png"},fbf1:function(t,e,n){"use strict";n("463e")},ff27:function(t,e,n){}});
//# sourceMappingURL=app.e5838d1e.js.map